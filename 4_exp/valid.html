<!DOCTYPE html>
<html>
    <head>
        <title>Forms</title>
        <meta name = "viewport" content = "width = device-width,initial-scale = 1.0">
        <meta charset = "utf-8">
        <link rel = "stylesheet" type = "text/css" href = "style.css">
        <link href="https://fonts.googleapis.com/css2?family=Ramabhadra&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
        <script>
           
        function validate(){
            
            var n = document.myform.fname.value;
            var e = document.myform.email.value;
            var dateofbirth = document.myform.db.value; 
            var a = document.myform.age.value;
             
  
            var atpos=e.indexOf("@");
	        var dotpos=e.lastIndexOf(".");

            if( (n==='') && (e==='') && (dateofbirth==='') && (a==='')){
                alert("All fields are required!!");
                
            }
            else if((dateofbirth==='') && (a==='')){
                alert("Date of birth and age are required!!")
            }
            else if(n!=null && e!=null){
               if(n == null || n === ''){
                  alert('Name is required');
                
            }
              else 
                {
                if(n!="")
                {
                var r=new Array("0","1","2","3","4","5","6","7","8","9",'.');
                var len=r.length;
                    for(i=0;i<len;i++)
                    {
                        if(n.match(r[i]))
                        {
                            alert("Invalid name,Numbers and dots are not allowed");
                            
                            break;

                        }
                    }
                }
                }
                
            if(e === ''){
                alert("E-mail is required!!");
            
            }
            else{
            
        
                var reg = /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
                if (reg.test(e)){
                   return true;
                    
                }
                else{
                    alert("Invalid email-id!!");
                }
            }
        }
        }
        function exefunction(){ 
            var dateofbirth = document.getElementById("date");
            var dob = dateofbirth.value.split('/');  
            var dd = dob[0];  
            var mm = dob[1];  
            var yy = dob[2]; 
            var a = document.myform.age.value;
            
           
        if(dateofbirth ===''){
            alert("Date of birth is required!!");
        }
        else{
            
               
                if (dob.length != 3) {  
                    alert("Please enter Date Of Birth in (dd/mm/yyyy) format");  
                    
                }  
                  
                    if ((mm == 4 || mm == 6 || mm == 9 || mm == 11) && dd > 30) {  
                        alert("Please enter Day less than equal to 30");  
                        return false;  
                    }  
                    if ((mm == 1 || mm == 3 || mm == 5 || mm == 7 || mm == 8 || mm == 10 || mm == 12) && dd > 31) {  
                        alert("Please enter Day less than equal to 31");  
                        return false;  
                    }  
                    if (mm == 2) {  
                        var lyear = false;  
                        if ((!(yy % 4) && yy % 100) || !(yy % 400)) {  
                            lyear = true;  
                        }  
                        if ((lyear == false) && (dd >= 29)) {  
                            alert('Invalid date format in February!');  
                            return false;  
                        }  
                        if ((lyear == true) && (dd > 29)) {  
                            alert('Invalid date format in February!');  
                            return false;  
                        }  
                    }  
                    if (parseFloat(dob[1]) > 12) {  
                        alert("Please enter Month less than equal to 12");  
                        return false;  
                    }  
                    if (dob[2].length != 4) {  
                        alert("Please enter Year in Four Digit (yyyy)");  
                        return false;  
                    }  
                    
                   
                } 
                var a = 2020 - yy;
                    document.myform.age.value = a;
                    document.getElementById("myage").setAttribute('readonly',true);
             
            }
        
           
            
            
        
        
     
    
        
        </script>
    </head>
    <body>
        <h1>FORM VALIDATION</h1>
        <div class = "container">
            <div class = "header">
                <h2>REGISTER HERE</h2>
            <form name = "myform" method= "post" action ="#" onsubmit = "return validate(this)">
                <p>
                <label for = "name">NAME:</label>
                <input type = "text" id="name" name="fname">
                </p>
                <p>
                <label for = "mail">EMAIL:</label>
                <input type = "text" id = "mail" name = "email">
                </p>
                <p>
                    <label for = "dob"> DOB:</label>
                    <input type = "text" id ="date" name = "db" size = 10 onblur="exefunction()">
                    <!--button id= "age" onblur="exefunction()">Get Age</button-->
                </p>
                <p>
                   
                    <label for = "dob"> AGE:</label>
                    <input type = "text" id ="myage" name = "age"> 
                </p>
                <p>
                <input type ="submit" value = "Submit"> <input type = "reset" value = "Reset">
             </p>
             
            </form>
        </div>
        <p id = "age1"></p>
    </body>
</html>